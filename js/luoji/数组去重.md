## 数组去重
```javascript{.line-numbers}
    const arr = [1, 1, 'true', 'true', true, true, 15, 15, false, false, undefined, undefined, null, null, NaN, NaN, 'NaN', 0, 0, 'a', 'a', {}, {}];
```
### 一维数组去重
#### 1. 使用 Set 方法
```javascript{.line-numbers}
    let newArr = Array.from(new Set(arr));
    console.log(newArr);
    //[1, "true", true, 15, false, undefined, null, NaN, "NaN", 0, "a", {}, {}]
    // {} 没有去重
```
#### 2. 使用 for 循环配合 splice 方法
```javascript{.line-numbers}
    for(let i = 0; i < arr.length; i++){
        for(let j = i + 1; j < arr.length; j++){
            if(arr[i] == arr[j]){
                arr.splice(j, 1);
                j--;
            }
        }
    }
    console.log(arr);
    //[1, "true", 15, false, undefined, NaN, NaN, "NaN", "a", {…}, {…}]     
    //NaN和{}没有去重，两个null直接消失了

    // PS： NaN == NaN  false
    //      {} == {}   false
```

 #### 3. 使用 includes 方法
```javascript{.line-numbers}
    let newArr = [];
    arr.forEach(item => {
        if(!newArr.includes(item)){
            newArr.push(item);
        }
    })
    console.log(newArr);
    // [1, "true", true, 15, false, undefined, null, NaN, NaN, "NaN", 0, "a", {…}, {…}]  
    //NaN、{}没有去重
    
    // 使用 reduce 和 includes 
    let newArr = arr.reduce((initArr, item, index, arr)=>{
        if(!initArr.includes(item)){
            initArr.push(item);
        }
        return initArr;
    },[])
```

 #### 4. 使用 indexOf 方法
```javascript{.line-numbers}
    let newArr = [];
    arr.forEach(item => {
        if(newArr.indexOf(item) == -1){
            newArr.push(item);
        }
    })
    console.log(newArr);
    // [1, "true", true, 15, false, undefined, null, NaN, NaN, "NaN", 0, "a", {…}, {…}]  
    //NaN、{}没有去重

    // 使用 reduce 和 indexOf 
    let newArr = arr.reduce((initArr, item, index, arr)=>{
        if(newArr.indexOf(item) == -1){
            initArr.push(item);
        }
        return initArr;
    },[])
```

### 数组中对象去重
```javascript{.line-numbers}
    const arrObj = [
        { key: '01', value: '西施' },
        { key: '02', value: '王昭君' },
        { key: '03', value: '杨玉环' },
        { key: '04', value: '貂蝉' },
        { key: '01', value: '西施' },
        { key: '01', value: '西施' }
    ];
```

#### 1. 通过对象来去重
```javascript{.line-numbers}
    let obj = {};
    let newArr = [];
    arrObj.forEach(item => {
        if(!obj[item.key]){
            newArr.push(item);
            obj[item.key] = true;
        }
    })
    console.log(newArr);

    // 使用 reduce 配合 对象 去重
    let obj = {};
    let newArr = arrObj.reduce((initArr, item)=>{
        if(!obj[item.key]){
            initArr.push(item);
            obj[item.key] = true;
        }
        return initArr;
    }, [])
    console.log(newArr);
```

#### 2. 通过对比新旧数组中的 key 配合 lock
```javascript{.line-numbers}
    let newArr = [];
    arrObj.forEach(item => {
        let lock = true;
        newArr.forEach(i => {
            if(item.key == i.key){
                lock = false;
            }
        })
        if(lock){
            newArr.push(item);
        }
    })
    console.log(newArr);
```
### 数组数据结构转换
```javascript{.line-numbers}
    const arr = [
        { name: '1', type: '0' },
        { name: '2', type: '3' },
        { name: '3', type: '2' },
        { name: '4', type: '1' },
        { name: '5', type: '2' },
        { name: '6', type: '3' },
        { name: '7', type: '0' }
    ];

    // [
    //    {type:'0',value:[{ name: '1', type: '0' },{ name: '7', type: '0' }]},
    //    {type:'1',value:[{ name: '4', type: '1' }]}...
    // ]
```
#### 1. reduce + lock 转换
```javascript{.line-numbers}
    let newArr = arr.reduce((prevArr, item)=>{ 
        let lock = true;
        prevArr.forEach(i => {
            if(i.type == item.type){
                i.value.push(item);
                lock = false;
            }
        });
        if(lock){
            prevArr.push({type: item.type, value:[item]});
        }
        return prevArr;
    },[])
    console.log(newArr);
```
#### 2. reduce + obj 转换
```javascript{.line-numbers}
    let obj = {};
    let newArr = arr.reduce((prevArr, item)=>{
        if(obj[item.type]){
            prevArr.forEach(i => {
                if(i.type == item.type){
                    i.value.push(item);
                }
            })
        }else{
            obj[item.type] = true;
            prevArr.push({type: item.type, value:[item]});
        }
        return prevArr;
    }, []);
    console.log(newArr);
```